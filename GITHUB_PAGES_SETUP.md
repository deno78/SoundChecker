# GitHub Pages セットアップガイド

このドキュメントでは、GitHub Pagesを設定して、SoundCheckerアプリを公開する手順を説明します。

## 前提条件

- GitHubアカウントを持っていること
- このリポジトリへの管理者権限があること

## セットアップ手順

### 1. GitHub Pagesの有効化

1. GitHubでリポジトリページを開きます
2. 「Settings」（設定）タブをクリックします
3. 左側のメニューから「Pages」を選択します
4. 「Source」（ソース）セクションで：
   - 「Source」を **GitHub Actions** に設定します
   - これにより、GitHub Actionsワークフローがページをデプロイできるようになります

### 2. 自動デプロイ

設定が完了すると、以下のように自動デプロイが動作します：

1. `main` ブランチにコードをプッシュまたはマージ
2. GitHub Actionsが自動的に起動し、以下を実行：
   - 依存関係のインストール（`npm ci`）
   - プロダクションビルド（`npm run build:prod`）
   - ビルド成果物のアップロード
   - GitHub Pagesへのデプロイ
3. デプロイが成功すると、アプリが以下のURLで公開されます：
   ```
   https://<username>.github.io/SoundChecker/
   ```

### 3. デプロイの確認

1. リポジトリの「Actions」タブでワークフローの実行状況を確認できます
2. デプロイが完了すると、「Pages」設定ページにアプリのURLが表示されます
3. URLをクリックして、公開されたアプリにアクセスします

## 手動デプロイ

緊急で手動デプロイが必要な場合：

1. リポジトリの「Actions」タブを開きます
2. 左側から「Deploy to GitHub Pages」ワークフローを選択
3. 「Run workflow」ボタンをクリック
4. ブランチを選択（通常は `main`）
5. 「Run workflow」を実行

## トラブルシューティング

### デプロイが失敗する場合

1. 「Actions」タブでエラーログを確認します
2. ビルドエラーがないか確認します：
   ```bash
   npm install
   npm run build:prod
   ```
3. `package-lock.json` が最新であることを確認します

### アプリが正しく表示されない場合

1. ブラウザのキャッシュをクリアします
2. GitHub Pagesの設定で正しいURLが表示されているか確認します
3. `package.json` の `build:prod` スクリプトで `--base-href` が正しく設定されているか確認します

## マイクの権限について

GitHub Pages（HTTPS）でホストされているため、マイクへのアクセスが可能です。
ユーザーが初回アクセス時にマイクの使用許可を求められます。

## カスタムドメインの設定（オプション）

カスタムドメインを使用する場合：

1. 「Pages」設定で「Custom domain」セクションを見つけます
2. ドメイン名を入力します
3. DNSレコードを設定します（GitHubの指示に従ってください）
4. 「Enforce HTTPS」を有効にします（推奨）

## セキュリティ

- HTTPS通信により、マイクアクセスやその他の機密機能が安全に動作します
- GitHub Actionsのワークフローは最小限の権限で実行されます
- デプロイトークンは自動的にGitHubによって管理されます
